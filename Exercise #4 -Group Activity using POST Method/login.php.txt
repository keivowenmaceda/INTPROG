<?php
session_start();

$error = '';

if ($_SERVER["REQUEST_METHOD"] == "POST") {
    $username = isset($_POST['username']) ? trim($_POST['username']) : '';
    $password = isset($_POST['password']) ? trim($_POST['password']) : '';

    if (isset($_SESSION['user'])) {
        if ($username === ($_SESSION['user']['username'] ?? '') && $password === ($_SESSION['user']['password'] ?? '')) {
            header("Location: welcome.php?user=" . urlencode($username));
            exit();
        } else {
            $error = "Invalid username or password!";
        }
    } else {
        $error = "No registered user found. Please register first.";
    }
}
?>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Login</title>
  <style>
   body {
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg, #000000, #FFFFFF), url(blackk.jpg) no-repeat center center fixed;
  background-size: cover;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  margin: 0;
} 
 .container {
      background: rgba(255, 255, 255, 0.85);
      padding: 30px 40px;
      border-radius: 15px;
      box-shadow: 0px 8px 20px rgba(0,0,0,0.15);
      width: 350px;
      text-align: center;
      border: 1px solid #000000;
      backdrop-filter: blur(10px);
      animation: fadeIn 0.8s ease-in-out;
    }

    h2 {
      margin-bottom: 20px;
      color: #000000;
    }

    label {
      font-weight: bold;
      float: left;
      margin: 10px 0 5px;
      color: #000000;
    }

    input[type="text"], input[type="password"] {
      width: 100%;
      padding: 10px;
      margin-bottom: 15px;
      border: 1px solid #000000;
      border-radius: 6px;
      outline: none;
      transition: border 0.3s, box-shadow 0.3s;
    }

    input[type="text"]:focus, input[type="password"]:focus {
      border: 1px solid #000000;
      box-shadow: 0 0 6px rgba(0, 0, 0, 0.4);
    }

    button {
      background: #000000;
      color: #FFFFFF;
      padding: 12px;
      width: 100%;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
      transition: background 0.3s, transform 0.1s;
      box-shadow: 0px 3px 6px rgba(0,0,0,0.15);
    }

    button:hover {
      background: #333333;
    }

    button:active {
      transform: scale(0.98);
    }

    p {
      margin-top: 15px;
      font-size: 14px;
    }

    a {
      color: #000000;
      text-decoration: none;
      transition: color 0.3s;
    }

    a:hover {
      color: #333333;
      text-decoration: underline;
    }

    .error {
      color: #000000;
      margin-bottom: 15px;
      font-size: 14px;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-15px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Login</h2>
    <?php if (!empty($error)): ?>
      <p class="error"><?php echo htmlspecialchars($error, ENT_QUOTES, 'UTF-8'); ?></p>
    <?php endif; ?>
    <form method="POST" action="login.php">
      <label>Username:</label>
      <input type="text" name="username" required>

      <label>Password:</label>
      <input type="password" name="password" required>

      <button type="submit">Login</button>
    </form>
    <p>No account? <a href="register.php">Register here</a></p>
  </div>
</body>
</html>
